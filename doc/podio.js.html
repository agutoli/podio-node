<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: podio.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: podio.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Node wrapper to Podio API
 *
 * @author       Bruno Thiago Leite Agutoli &lt;bruno.agutoli@gmail.com>
 * @version      Release: 0.0.1
 * @license      http://www.gnu.org/licenses/gpl.html GNU GENERAL PUBLIC LICENSE
 * @see          https://developers.podio.com/ 
 */

/*jshint node: true */
'use strict';

var Errors = require('./errors');
var extend = require('node.extend');

/**
 * Node client for Podio API.
 *
 * @namespace Podio
 * @throws {Podio.MissingRequiredParameter}
 */
function Podio( options ) {

  this.access_token = null;
  this.adapter = {};

  if (!options.api_key) {
    throw new Errors.MissingRequiredParameter(' Param "api_key" is required! ');
  }

  if (!options.api_secret) {
    throw new Errors.MissingRequiredParameter(' Param "api_secret" is required! ');
  }

  if (!options.services) {
    throw new Errors.MissingRequiredParameter(' Param "services" is required! ');
  }

  this._options = {
    version: '1.0',
    api_key: null,
    api_secret: null,
    api_auth_url: 'https://podio.com',
    api_url: 'https://api.podio.com',
    services: [],
    adapter: 'oauth'
  };

  // merge exception classes
  extend(this, Errors); 
  // merge options with defaults  
  extend(this._options, options);

  // add class base
  this._options.services.unshift('base');
  this._init();
}

Podio.prototype = {
  /**
   * Initializes the objects and modules needed
   *
   * @function Podio._init
   * @memberof Podio
   * @param  {void}
   * @return {object} Podio object
   * @throws {Podio.InvalidModule}
   * @private
   */
  _init: function(){
    var _this = this;

    // set adapter
    extend(this, require('./adapters/'+ this._options.adapter)(this));
    // adapter init
    this.AdapterSetup();

    // include services
    this._options.services.forEach(function(module) {
      var prefixPath = './services/'+ _this._options.version;
      try {
        require(prefixPath + '/' + module)(_this);
      } catch (e) {
        throw new Errors.InvalidModule('Unable to import module "'+ module +'"');
      }
    });
  },
  /**
   * Podio.register
   *
   * @desc Registers an object module to Podio
   *
   * @memberof Podio
   * @param  {string} namespace - Namespace ex. Podio.my_namespace.[my_module]
   * @param  {object} moduleObject - module object
   * @return {object} Podio object
   * @private
   */
  _register: function(namespace, moduleObject){
    this[namespace] = moduleObject;
    return this;
  },
};

module.exports = function(opts) {
  return new Podio(opts);
};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="oauth.html">adapters/oauth</a></li><li><a href="simple-oauth2.html">adapters/simple-oauth2</a></li><li><a href="apps.html">services/apps</a></li><li><a href="contacts.html">services/contacts</a></li><li><a href="users.html">services/users</a></li></ul><h3>Namespaces</h3><ul><li><a href="Podio.html">Podio</a></li><li><a href="Podio.apps.html">Podio.apps</a></li><li><a href="Podio.contacts.html">Podio.contacts</a></li><li><a href="Podio.users.html">Podio.users</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Wed Aug 06 2014 02:59:55 GMT-0300 (BRT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
